{% extends "teacher/teacher.html" %}

{% block app_content %}
    <div class="container mb-4"></div>
    <p class="lead"><strong>课程号：</strong>{{ course_info.CourseNum }}</p>
    <p class="lead"><strong>课程名：</strong>{{ course_info.CourseName }}</p>
    <p class="lead"><strong>选课人数：</strong>{{ course_info.CourseStudents }}</p>
    <form action="/course_grade_input" method="POST" class="form-signin">
    <table class="table table-striped table-hover">
        <thead class="thead-dark">
        <tr>
            <th class="lead">学号</th>
            <th class="lead">姓名</th>
            <th class="lead">性别</th>
            <th class="lead">学院</th>
            <th class="lead">专业</th>
            <th class="lead">成绩</th>
        </tr>
        </thead>
        <tbody>
        {% if tables %}
        {% for table in tables %}
        <tr>
           <td class="lead StudentNum">{{ table.StudentNum }}</td>
           <td class="lead">{{ table.StudentName }}</td>
           <td class="lead">{{ table.StudentSex }}</td>
           <td class="lead">{{ table.DeptName }}</td>
           <td class="lead">{{ table.MajorName }}</td>
           <td class="lead">
               {% if table.Grade %}
               <div class="row clearfix">
                <div class="col-md-5 column">
                    <strong>{{ table.Grade }}</strong>
                </div>
                <div class="col-md-7 column">
                    <a  class="btn btn-danger btn-sm" href="{{ url_for('grade_set_zero', StudentNum=table.StudentNum) }}">重置成绩</a>
                </div>
               </div>
                {% else %}
                <div class="input-group input-group-sm"> 
                    <input type="number" class="form-control" max=100 min=0 required>
                </div>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
        {% endif %}
        </tbody>
    </table>
    <div class="row">
        <div class="col-md-12 column">
            <button type="submit" class="btn btn-outline-success btn-lg btn-block">确认录入</button>
        </div>
    </div>
</form>
{% endblock %}

{% block scripts %}
{{super()}}
    <script>
        $(document).ready(function(){
            var td_StudentNum = $('table').find('td.StudentNum')
            td_StudentNum.each(function(){
                $(this).siblings().last().find('input').attr('name',$(this).text());
            })
        })
    </script>
{% endblock %}