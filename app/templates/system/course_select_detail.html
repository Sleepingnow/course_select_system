{% extends "system/teacher.html" %}

{% block app_content %}
    <p>课程号：<strong>{{ course_info.CourseNum }}</strong><br>
        课程名：<strong>{{ course_info.CourseName }}</strong><br>
        选课人数：<strong>{{ course_info.CourseStudents }}</strong>
    </p>
    <form action="/course_grade_input" method="POST" class="form-signin">
    <table class="table table-striped table-bordered table-hover">
        <tr>
            <th align="center">学号</th>
            <th align="center">姓名</th>
            <th align="center">性别</th>
            <th align="center">学院</th>
            <th align="center">专业</th>
            {% if grade_input %}
            <th align="center">成绩</th>
            {% endif %}
        </tr>
        {% if tables %}
        {% for table in tables %}
        <tr>
            <td align="center" class="StudentNum">{{ table.StudentNum }}</td>
            <td align="center">{{ table.StudentName }}</td>
            <td align="center">{{ table.StudentSex }}</td>
            <td align="center">{{ table.DeptName }}</td>
            <td align="center">{{ table.MajorName }}</td>
            {% if grade_input %}
            <td align="center">
                <div class="input-group input-group-sm">
                    <p>{{ table.grade }}</p>
                    <input type="number" class="form-control" max=100 min=0 required>
                </div>
            </td>
            {% endif %}
        </tr>
        {% endfor %}
        {% endif %}
    </table>
    {% if grade_input %}
    <button type="submit" class="btn btn-dark btn-lg btn-block">确认录入</button>
    {% endif %}
</form>
{% endblock %}

{% block scripts %}
{{super()}}
{% if grade_input %}
    <script>
        $(document).ready(function(){
            var td_StudentNum = $('table').find('td.StudentNum')
            td_StudentNum.each(function(){
                $(this).siblings().last().find('input').attr('name',$(this).text());
            })
        })
    </script>
{% endif %}
{% endblock %}